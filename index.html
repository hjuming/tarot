<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>線上塔羅神諭 - 免費塔羅牌占卜 & 78張牌義詳解 | 探索自我・洞見未來</title>
    <meta name="description" content="探索線上塔羅神諭，您的免費線上塔羅牌占卜工具。提供78張塔羅牌正逆位詳解、因果與時間之流牌陣分析。透過塔羅認識自我，洞見未來，解決生活問題。">
    <link rel="canonical" href="https://tarot-c0p.pages.dev/">
    <meta property="og:title" content="線上塔羅神諭 - 免費塔羅牌占卜 & 78張牌義詳解">
    <meta property="og:description" content="提供專業的線上塔羅牌占卜與完整的78張牌義解析，幫助您探索內心、解決困惑。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tarot-c0p.pages.dev/">
    <meta property="og:image" content="https://i.urusai.cc/yVqvp.jpeg"> <!-- 使用太陽牌作為預覽圖 -->

    <!-- Fonts and Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- JSON-LD Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "WebSite",
          "url": "https://tarot-c0p.pages.dev/",
          "name": "線上塔羅神諭",
          "description": "免費的線上塔羅牌占卜與78張牌義詳解，幫助您探索自我、洞見未來。"
        },
        {
          "@type": "BreadcrumbList",
          "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "name": "首頁",
            "item": "https://tarot-c0p.pages.dev/"
          }]
        },
        {
          "@type": "ItemList",
          "name": "78張塔羅牌義",
          "description": "完整78張塔羅牌的牌義列表，包含大阿爾克那與四組小阿爾克那。",
          "itemListElement": [
            {"@type": "ListItem", "position": 1, "name": "愚人"},
            {"@type": "ListItem", "position": 2, "name": "魔術師"},
            {"@type": "ListItem", "position": 3, "name": "女祭司"},
            {"@type": "ListItem", "position": 4, "name": "皇后"},
            {"@type": "ListItem", "position": 5, "name": "皇帝"},
            {"@type": "ListItem", "position": 6, "name": "教宗"},
            {"@type": "ListItem", "position": 7, "name": "戀人"},
            {"@type": "ListItem", "position": 8, "name": "戰車"},
            {"@type": "ListItem", "position": 9, "name": "力量"},
            {"@type": "ListItem", "position": 10, "name": "隱士"},
            {"@type": "ListItem", "position": 11, "name": "命運之輪"},
            {"@type": "ListItem", "position": 12, "name": "正義"},
            {"@type": "ListItem", "position": 13, "name": "吊人"},
            {"@type": "ListItem", "position": 14, "name": "死神"},
            {"@type": "ListItem", "position": 15, "name": "節制"},
            {"@type": "ListItem", "position": 16, "name": "惡魔"},
            {"@type": "ListItem", "position": 17, "name": "塔"},
            {"@type": "ListItem", "position": 18, "name": "星星"},
            {"@type": "ListItem", "position": 19, "name": "月亮"},
            {"@type": "ListItem", "position": 20, "name": "太陽"},
            {"@type": "ListItem", "position": 21, "name": "審判"},
            {"@type": "ListItem", "position": 22, "name": "世界"},
            {"@type": "ListItem", "position": 23, "name": "權杖一"},
            {"@type": "ListItem", "position": 24, "name": "權杖二"},
            {"@type": "ListItem", "position": 25, "name": "權杖三"},
            {"@type": "ListItem", "position": 26, "name": "權杖四"},
            {"@type": "ListItem", "position": 27, "name": "權杖五"},
            {"@type": "ListItem", "position": 28, "name": "權杖六"},
            {"@type": "ListItem", "position": 29, "name": "權杖七"},
            {"@type": "ListItem", "position": 30, "name": "權杖八"},
            {"@type": "ListItem", "position": 31, "name": "權杖九"},
            {"@type": "ListItem", "position": 32, "name": "權杖十"},
            {"@type": "ListItem", "position": 33, "name": "權杖侍者"},
            {"@type": "ListItem", "position": 34, "name": "權杖騎士"},
            {"@type": "ListItem", "position": 35, "name": "權杖王后"},
            {"@type": "ListItem", "position": 36, "name": "權杖國王"},
            {"@type": "ListItem", "position": 37, "name": "聖杯一"},
            {"@type": "ListItem", "position": 38, "name": "聖杯二"},
            {"@type": "ListItem", "position": 39, "name": "聖杯三"},
            {"@type": "ListItem", "position": 40, "name": "聖杯四"},
            {"@type": "ListItem", "position": 41, "name": "聖杯五"},
            {"@type": "ListItem", "position": 42, "name": "聖杯六"},
            {"@type": "ListItem", "position": 43, "name": "聖杯七"},
            {"@type": "ListItem", "position": 44, "name": "聖杯八"},
            {"@type": "ListItem", "position": 45, "name": "聖杯九"},
            {"@type": "ListItem", "position": 46, "name": "聖杯十"},
            {"@type": "ListItem", "position": 47, "name": "聖杯侍者"},
            {"@type": "ListItem", "position": 48, "name": "聖杯騎士"},
            {"@type": "ListItem", "position": 49, "name": "聖杯王后"},
            {"@type": "ListItem", "position": 50, "name": "聖杯國王"},
            {"@type": "ListItem", "position": 51, "name": "寶劍一"},
            {"@type": "ListItem", "position": 52, "name": "寶劍二"},
            {"@type": "ListItem", "position": 53, "name": "寶劍三"},
            {"@type": "ListItem", "position": 54, "name": "寶劍四"},
            {"@type": "ListItem", "position": 55, "name": "寶劍五"},
            {"@type": "ListItem", "position": 56, "name": "寶劍六"},
            {"@type": "ListItem", "position": 57, "name": "寶劍七"},
            {"@type": "ListItem", "position": 58, "name": "寶劍八"},
            {"@type": "ListItem", "position": 59, "name": "寶劍九"},
            {"@type": "ListItem", "position": 60, "name": "寶劍十"},
            {"@type": "ListItem", "position": 61, "name": "寶劍侍者"},
            {"@type": "ListItem", "position": 62, "name": "寶劍騎士"},
            {"@type": "ListItem", "position": 63, "name": "寶劍王后"},
            {"@type": "ListItem", "position": 64, "name": "寶劍國王"},
            {"@type": "ListItem", "position": 65, "name": "錢幣一"},
            {"@type": "ListItem", "position": 66, "name": "錢幣二"},
            {"@type": "ListItem", "position": 67, "name": "錢幣三"},
            {"@type": "ListItem", "position": 68, "name": "錢幣四"},
            {"@type": "ListItem", "position": 69, "name": "錢幣五"},
            {"@type": "ListItem", "position": 70, "name": "錢幣六"},
            {"@type": "ListItem", "position": 71, "name": "錢幣七"},
            {"@type": "ListItem", "position": 72, "name": "錢幣八"},
            {"@type": "ListItem", "position": 73, "name": "錢幣九"},
            {"@type": "ListItem", "position": 74, "name": "錢幣十"},
            {"@type": "ListItem", "position": 75, "name": "錢幣侍者"},
            {"@type": "ListItem", "position": 76, "name": "錢幣騎士"},
            {"@type": "ListItem", "position": 77, "name": "錢幣王后"},
            {"@type": "ListItem", "position": 78, "name": "錢幣國王"}
          ]
        },
        {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "塔羅牌是什麼？",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "塔羅牌不僅是一種預測未來的工具，其更深層次的目的是為了解決問題、認識自我。它是一套由78張圖像豐富的卡牌組成的系統，透過圖像來幫助我們認識自我、覺察問題。使用塔羅牌應以解決生活問題、探索內心、尋找人生方向為核心目的。"
              }
            },
            {
              "@type": "Question",
              "name": "塔羅牌占卜如何運作？",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "塔羅牌的運作並非基於神秘力量，而是主要作為一種連結使用者「潛意識」的工具。當您專注於一個問題並抽出牌卡時，所選出的牌會與您個人的頻率產生共振，反映出您當下的內心狀態、課題與潛在的可能性。解牌的過程，就是將這些圖像語言轉化為對現實生活的洞見與指引。"
              }
            },
            {
              "@type": "Question",
              "name": "塔羅牌占卜準確嗎？",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "塔羅牌的準確性源於它反映了您當下的狀態與能量。它並非宿命論，而是揭示在「不做出改變」的情況下，最有可能發生的未來。如果您的心態或行動改變了，結果也會隨之改變。因此，塔羅牌的真正目的不是「算準」，而是引導人們看見可能性，從而創造自己想要的命運。"
              }
            },
            {
              "@type": "Question",
              "name": "大阿爾克那（大牌）和小阿爾克那（小牌）有什麼不同？",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "大阿爾克那（22張）代表宇宙性的宏觀能量、重大的生命課題或人生轉折點，其影響是深遠且長期的。小阿爾克那（56張）則更貼近日常生活，描繪具體的事件、情境與個人心態。小牌又分為四個牌組（權杖、聖杯、寶劍、錢幣），分別對應火、水、風、土四大元素，管理人生的不同面向。"
              }
            },
            {
              "@type": "Question",
              "name": "正位和逆位牌有什麼意義？",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "逆位並非單純的正位相反意思，而是正位能量的一種變化。它可能代表能量被壓抑、過度或不足、延遲，或是需要從不同的角度去理解。初學者可以先專注於正位牌義，待熟悉後再深入探索逆位所帶來的豐富解讀層次。"
              }
            },
            {
              "@type": "Question",
              "name": "我應該如何提問？",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "一個清晰的問題才能得到清晰的答案。建議提出開放式問題（例如「我該如何改善我的工作狀況？」）而非封閉式的是非題。對於初學者，可以將問題統一設定為「未來三個月的[某領域]發展如何？」，例如「未來三個月的工作發展如何？」來進行練習。"
              }
            }
          ]
        }
      ]
    }
    </script>
    
    <style>
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #111827; /* Darker blue-gray */
            color: #d1d5db; /* Lighter gray for text */
        }
        .active-spread {
            background-color: #facc15 !important; /* Yellow-400 */
            color: #111827 !important; /* Dark blue-gray text */
            font-weight: 700;
        }
        /* Style for details/summary accordion */
        details > summary {
            list-style: none;
            cursor: pointer;
            padding: 1.5rem;
            border-bottom: 1px solid #374151;
            font-size: 1.5rem;
            font-weight: 600;
            color: #fde047; /* Lighter Yellow */
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details > summary:hover {
            background-color: #1f2937;
        }
        details > summary::after {
            content: '+';
            font-size: 2rem;
            color: #a5b4fc; /* Lighter Indigo */
            transition: transform 0.3s ease;
        }
        details[open] > summary::after {
            transform: rotate(45deg);
        }
        details .card-grid-container {
            padding: 1.5rem;
            background-color: rgba(17, 24, 39, 0.7);
        }
        .card-image {
            aspect-ratio: 2 / 3.5;
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 8px;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <!-- Header Section -->
    <header class="text-center py-12 md:py-20 px-4" style="background: radial-gradient(circle, #1f2937 0%, #111827 100%);">
        <h1 class="text-4xl md:text-6xl font-bold text-yellow-300 tracking-wider">線上塔羅神諭</h1>
        <p class="text-lg md:text-xl mt-4 text-indigo-300">探索自我・洞見未來</p>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-7xl">

        <!-- Introduction Section -->
        <section id="introduction" class="mb-16 bg-gray-800 bg-opacity-50 p-8 rounded-2xl shadow-lg">
            <h2 class="text-3xl font-bold text-yellow-300 mb-6 border-b-2 border-yellow-300 border-opacity-50 pb-3">塔羅的智慧之旅</h2>
            <div class="space-y-6 text-base md:text-lg leading-relaxed text-gray-200">
                <p>塔羅牌不僅僅是一種預測未來的工具，其更深層次的目的是為了解決問題、認識自我。它是一套透過圖像來認識自我、覺察問題的牌卡。因此，使用塔羅牌應以解決生活問題、探索內心、尋找人生方向為核心目的，而非僅僅追求預測的準確度。學習的過程本身，就是透過牌卡來體驗生命、讓心靈變得更好。</p>
                <p>本網站提供免費的線上占卜，幫助您在迷惘時找到方向，在困頓中獲得啟示。請靜下心來，專注於您的問題，讓塔羅牌引領您看見內在的智慧。</p>
            </div>
        </section>

        <!-- Online Reading Section -->
        <section id="reading-section" class="mb-16 bg-gray-800 bg-opacity-50 p-8 rounded-2xl shadow-lg">
            <h2 class="text-3xl font-bold text-yellow-300 mb-8 text-center">線上塔羅占卜</h2>
            
            <!-- Step 1: Spread Selection -->
            <div class="text-center mb-8">
                <p class="text-lg text-indigo-300 mb-4">第一步：選擇您的牌陣</p>
                <div class="flex justify-center space-x-4">
                    <button id="spread-cause-effect" class="px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 transition duration-300">因果牌陣 (2張)</button>
                    <button id="spread-timeline" class="px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 transition duration-300">時間之流牌陣 (3張)</button>
                </div>
            </div>
             <p id="spread-description" class="text-center text-indigo-200 mb-8 h-12"></p>
            
            <!-- Reading Result Placeholders and Cards -->
            <div id="reading-area" class="hidden">
                 <div id="drawn-cards" class="flex justify-center items-start gap-4 md:gap-8 flex-wrap mb-8">
                    <!-- Placeholders or Cards will be injected here -->
                </div>
            </div>

            <!-- Step 2: Draw Button -->
            <div class="text-center mb-8">
                 <p class="text-lg text-indigo-300 mb-4">第二步：專注默念問題後，按下抽牌</p>
                <button id="draw-cards-btn" class="px-8 py-4 bg-yellow-500 text-gray-900 font-bold text-lg rounded-lg shadow-xl hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-opacity-75 transition-transform transform hover:scale-105 duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-600" disabled>請先選擇牌陣</button>
            </div>

            <!-- Analysis and Email Form -->
            <div id="analysis-and-email-area" class="hidden">
                <div id="analysis-result" class="bg-gray-900 bg-opacity-40 p-6 rounded-lg">
                     <!-- Analysis will be injected here -->
                </div>

                <div id="email-form-container" class="mt-12 bg-gray-800 bg-opacity-70 p-8 rounded-2xl">
                    <h4 class="text-2xl font-bold text-center mb-4 text-yellow-300">寄送詳細分析報告</h4>
                    <p class="text-center text-indigo-300 mb-6 max-w-2xl mx-auto">想獲得更深入的個人化牌義詳解嗎？輸入您的電子信箱，我們將會把完整的分析報告寄送給您。</p>
                    <div class="flex flex-col md:flex-row max-w-lg mx-auto gap-4">
                        <input type="email" id="email-input" placeholder="請輸入您的電子信箱" class="flex-grow px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 text-white">
                        <button id="send-email-btn" class="px-6 py-3 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-75 transition duration-300">寄送報告</button>
                    </div>
                     <p class="text-xs text-gray-500 text-center mt-4">🔒 隱私聲明：您的資料僅用於寄送本次報告，系統不會保存你的資料與占卜結果。寄送完成後即時處理。若想再次取得報告，請重新占卜。</p>
                    <p id="email-status" class="text-center mt-4 h-6"></p>
                </div>
            </div>
        </section>

        <!-- Card Meaning Section -->
        <section id="card-meaning-section" class="bg-gray-800 bg-opacity-50 p-8 rounded-2xl shadow-lg">
            <h2 class="text-3xl font-bold text-yellow-300 mb-8 text-center">78張塔羅牌義詳解</h2>

            <!-- Major Arcana -->
            <details>
                <summary>大阿爾克那 (Major Arcana)</summary>
                <div class="card-grid-container grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4" id="major-arcana-grid"></div>
            </details>

            <!-- Wands -->
            <details>
                <summary>權杖 (Wands)</summary>
                <div class="card-grid-container grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4" id="wands-grid"></div>
            </details>

            <!-- Cups -->
            <details>
                <summary>聖杯 (Cups)</summary>
                <div class="card-grid-container grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4" id="cups-grid"></div>
            </details>
            
            <!-- Swords -->
            <details>
                <summary>寶劍 (Swords)</summary>
                <div class="card-grid-container grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4" id="swords-grid"></div>
            </details>

            <!-- Pentacles -->
            <details>
                <summary>錢幣 (Pentacles)</summary>
                <div class="card-grid-container grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4" id="pentacles-grid"></div>
            </details>
            
        </section>
        
        <!-- FAQ Section -->
        <section id="faq-section" class="mt-16 bg-gray-800 bg-opacity-50 p-8 rounded-2xl shadow-lg">
            <h2 class="text-3xl font-bold text-yellow-300 mb-8 text-center">塔羅牌常見問題 (FAQ)</h2>
            <div class="space-y-4">
                <details>
                    <summary class="text-xl text-indigo-300 hover:text-yellow-300">塔羅牌是什麼？</summary>
                    <div class="pt-2 pb-4 px-4 text-gray-400">
                        <p>塔羅牌不僅是一種預測未來的工具，其更深層次的目的是為了解決問題、認識自我。它是一套由78張圖像豐富的卡牌組成的系統，透過圖像來幫助我們認識自我、覺察問題。使用塔羅牌應以解決生活問題、探索內心、尋找人生方向為核心目的。</p>
                    </div>
                </details>
                <details>
                    <summary class="text-xl text-indigo-300 hover:text-yellow-300">塔羅牌占卜如何運作？</summary>
                    <div class="pt-2 pb-4 px-4 text-gray-400">
                        <p>塔羅牌的運作並非基於神秘力量，而是主要作為一種連結使用者「潛意識」的工具。當您專注於一個問題並抽出牌卡時，所選出的牌會與您個人的頻率產生共振，反映出您當下的內心狀態、課題與潛在的可能性。解牌的過程，就是將這些圖像語言轉化為對現實生活的洞見與指引。</p>
                    </div>
                </details>
                <details>
                    <summary class="text-xl text-indigo-300 hover:text-yellow-300">塔羅牌占卜準確嗎？</summary>
                    <div class="pt-2 pb-4 px-4 text-gray-400">
                        <p>塔羅牌的準確性源於它反映了您當下的狀態與能量。它並非宿命論，而是揭示在「不做出改變」的情況下，最有可能發生的未來。如果您的心態或行動改變了，結果也會隨之改變。因此，塔羅牌的真正目的不是「算準」，而是引導人們看見可能性，從而創造自己想要的命運。</p>
                    </div>
                </details>
                <details>
                    <summary class="text-xl text-indigo-300 hover:text-yellow-300">大阿爾克那（大牌）和小阿爾克那（小牌）有什麼不同？</summary>
                    <div class="pt-2 pb-4 px-4 text-gray-400">
                        <p>大阿爾克那（22張）代表宇宙性的宏觀能量、重大的生命課題或人生轉折點，其影響是深遠且長期的。小阿爾克那（56張）則更貼近日常生活，描繪具體的事件、情境與個人心態。小牌又分為四個牌組（權杖、聖杯、寶劍、錢幣），分別對應火、水、風、土四大元素，管理人生的不同面向。</p>
                    </div>
                </details>
                 <details>
                    <summary class="text-xl text-indigo-300 hover:text-yellow-300">正位和逆位牌有什麼意義？</summary>
                    <div class="pt-2 pb-4 px-4 text-gray-400">
                        <p>逆位並非單純的正位相反意思，而是正位能量的一種變化。它可能代表能量被壓抑、過度或不足、延遲，或是需要從不同的角度去理解。初學者可以先專注於正位牌義，待熟悉後再深入探索逆位所帶來的豐富解讀層次。</p>
                    </div>
                </details>
                 <details>
                    <summary class="text-xl text-indigo-300 hover:text-yellow-300">我應該如何提問？</summary>
                    <div class="pt-2 pb-4 px-4 text-gray-400">
                        <p>一個清晰的問題才能得到清晰的答案。建議提出開放式問題（例如「我該如何改善我的工作狀況？」）而非封閉式的是非題。對於初學者，可以將問題統一設定為「未來三個月的[某領域]發展如何？」，例如「未來三個月的工作發展如何？」來進行練習。</p>
                    </div>
                </details>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="text-center py-8 mt-12 border-t border-gray-700">
        <p class="text-gray-500">&copy; 2025 線上塔羅神諭. All Rights Reserved <a href="https://www.wedopr.com" target="_blank" rel="noopener noreferrer" class="text-indigo-400 hover:text-yellow-300">@WEDO</a></p>
    </footer>


    <!-- Modal for Card Details -->
    <div id="card-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center p-4">
        <div class="bg-gray-800 text-gray-200 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl z-10">&times;</button>
            <div id="modal-content" class="p-6 md:p-8">
                <!-- Card details will be injected here -->
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
    // Prevent details from staying open on page back
    window.addEventListener('pageshow', (event) => {
        if (event.persisted) {
            document.querySelectorAll('details').forEach(detail => {
                detail.removeAttribute('open');
            });
        }
    });

    const allCards = [
        // ... (card data from previous turn)
         // Major Arcana
        { name: "愚人", type: "大阿爾克那", img: "https://i.urusai.cc/myiOW.jpeg" },
        { name: "魔術師", type: "大阿爾克那", img: "https://i.urusai.cc/V3gw6.jpeg" },
        { name: "女祭司", type: "大阿爾克那", img: "https://i.urusai.cc/VNb65.jpeg" },
        { name: "皇后", type: "大阿爾克那", img: "https://i.urusai.cc/wVEX3.jpeg" },
        { name: "皇帝", type: "大阿爾克那", img: "https://i.urusai.cc/xkvjL.jpeg" },
        { name: "教宗", type: "大阿爾克那", img: "https://i.urusai.cc/z233n.jpeg" },
        { name: "戀人", type: "大阿爾克那", img: "https://i.urusai.cc/wf8po.jpeg" },
        { name: "戰車", type: "大阿爾克那", img: "https://i.urusai.cc/dx9Sn.jpeg" },
        { name: "力量", type: "大阿爾克那", img: "https://i.urusai.cc/bnHGo.jpeg" },
        { name: "隱士", type: "大阿爾克那", img: "https://i.urusai.cc/GOq3k.jpeg" },
        { name: "命運之輪", type: "大阿爾克那", img: "https://i.urusai.cc/zkpMV.jpeg" },
        { name: "正義", type: "大阿爾克那", img: "https://i.urusai.cc/E2Wyi.jpeg" },
        { name: "吊人", type: "大阿爾克那", img: "https://i.urusai.cc/pkaQf.jpeg" },
        { name: "死神", type: "大阿爾克那", img: "https://i.urusai.cc/SUe7O.jpeg" },
        { name: "節制", type: "大阿爾克那", img: "https://i.urusai.cc/TN1aj.jpeg" },
        { name: "惡魔", type: "大阿爾克那", img: "https://i.urusai.cc/hGBJS.jpeg" },
        { name: "塔", type: "大阿爾克那", img: "https://i.urusai.cc/6yuLx.jpeg" },
        { name: "星星", type: "大阿爾克那", img: "https://i.urusai.cc/el0N1.jpeg" },
        { name: "月亮", type: "大阿爾克那", img: "https://i.urusai.cc/4TPBJ.jpeg" },
        { name: "太陽", type: "大阿爾克那", img: "https://i.urusai.cc/yVqvp.jpeg" },
        { name: "審判", type: "大阿爾克那", img: "https://i.urusai.cc/32YH1.jpeg" },
        { name: "世界", type: "大阿爾克那", img: "https://i.urusai.cc/UKTLH.jpeg" },
        // Wands
        { name: "權杖一", type: "權杖", img: "https://i.urusai.cc/gCsOt.jpeg" },
        { name: "權杖二", type: "權杖", img: "https://i.urusai.cc/4X54O.jpeg" },
        { name: "權杖三", type: "權杖", img: "https://i.urusai.cc/Qv7wY.jpeg" },
        { name: "權杖四", type: "權杖", img: "https://i.urusai.cc/P9vMq.jpeg" },
        { name: "權杖五", type: "權杖", img: "https://i.urusai.cc/Hj53f.jpeg" },
        { name: "權杖六", type: "權杖", img: "https://i.urusai.cc/z1BJd.jpeg" },
        { name: "權杖七", type: "權杖", img: "https://i.urusai.cc/ri4bD.jpeg" },
        { name: "權杖八", type: "權杖", img: "https://i.urusai.cc/M5Flf.jpeg" },
        { name: "權杖九", type: "權杖", img: "https://i.urusai.cc/H2AjL.jpeg" },
        { name: "權杖十", type: "權杖", img: "https://i.urusai.cc/P1S56.jpeg" },
        { name: "權杖侍者", type: "權杖", img: "https://i.urusai.cc/12HwY.jpeg" },
        { name: "權杖騎士", type: "權杖", img: "https://i.urusai.cc/HUSWA.jpeg" },
        { name: "權杖王后", type: "權杖", img: "https://i.urusai.cc/LlOKb.jpeg" },
        { name: "權杖國王", type: "權杖", img: "https://i.urusai.cc/XkqoJ.jpeg" },
        // Cups
        { name: "聖杯一", type: "聖杯", img: "https://i.urusai.cc/BP986.jpeg" },
        { name: "聖杯二", type: "聖杯", img: "https://i.urusai.cc/J7Yqv.jpeg" },
        { name: "聖杯三", type: "聖杯", img: "https://i.urusai.cc/441CD.jpeg" },
        { name: "聖杯四", type: "聖杯", img: "https://i.urusai.cc/uUlZh.jpeg" },
        { name: "聖杯五", type: "聖杯", img: "https://i.urusai.cc/bC2fO.jpeg" },
        { name: "聖杯六", type: "聖杯", img: "https://i.urusai.cc/t2LbD.jpeg" },
        { name: "聖杯七", type: "聖杯", img: "https://i.urusai.cc/msjER.jpeg" },
        { name: "聖杯八", type: "聖杯", img: "https://i.urusai.cc/xh6MN.jpeg" },
        { name: "聖杯九", type: "聖杯", img: "https://i.urusai.cc/iQyxf.jpeg" },
        { name: "聖杯十", type: "聖杯", img: "https://i.urusai.cc/uXV7T.jpeg" },
        { name: "聖杯侍者", type: "聖杯", img: "https://i.urusai.cc/JFe5O.jpeg" },
        { name: "聖杯騎士", type: "聖杯", img: "https://i.urusai.cc/9O7fF.jpeg" },
        { name: "聖杯王后", type: "聖杯", img: "https://i.urusai.cc/KbNTo.jpeg" },
        { name: "聖杯國王", type: "聖杯", img: "https://i.urusai.cc/qM6g9.jpeg" },
        // Swords
        { name: "寶劍一", type: "寶劍", img: "https://i.urusai.cc/MnMh2.jpeg" },
        { name: "寶劍二", type: "寶劍", img: "https://i.urusai.cc/YaZ4y.jpeg" },
        { name: "寶劍三", type: "寶劍", img: "https://i.urusai.cc/jdDqb.jpeg" },
        { name: "寶劍四", type: "寶劍", img: "https://i.urusai.cc/dqzqG.jpeg" },
        { name: "寶劍五", type: "寶劍", img: "https://i.urusai.cc/fEyOm.jpeg" },
        { name: "寶劍六", type: "寶劍", img: "https://i.urusai.cc/cakNp.jpeg" },
        { name: "寶劍七", type: "寶劍", img: "https://i.urusai.cc/boWZf.jpeg" },
        { name: "寶劍八", type: "寶劍", img: "https://i.urusai.cc/mQxzN.jpeg" },
        { name: "寶劍九", type: "寶劍", img: "https://i.urusai.cc/198GY.jpeg" },
        { name: "寶劍十", type: "寶劍", img: "https://i.urusai.cc/TM7nJ.jpeg" },
        { name: "寶劍侍者", type: "寶劍", img: "https://i.urusai.cc/tFi1n.jpeg" },
        { name: "寶劍騎士", type: "寶劍", img: "https://i.urusai.cc/0zwp3.jpeg" },
        { name: "寶劍王后", type: "寶劍", img: "https://i.urusai.cc/fwjWB.jpeg" },
        { name: "寶劍國王", type: "寶劍", img: "https://i.urusai.cc/rWTFf.jpeg" },
        // Pentacles
        { name: "錢幣一", type: "錢幣", img: "https://i.urusai.cc/yPTi0.jpeg" },
        { name: "錢幣二", type: "錢幣", img: "https://i.urusai.cc/3rS9e.jpeg" },
        { name: "錢幣三", type: "錢幣", img: "https://i.urusai.cc/pwnsC.jpeg" },
        { name: "錢幣四", type: "錢幣", img: "https://i.urusai.cc/3lLGp.jpeg" },
        { name: "錢幣五", type: "錢幣", img: "https://i.urusai.cc/KLMdF.jpeg" },
        { name: "錢幣六", type: "錢幣", img: "https://i.urusai.cc/zJf26.jpeg" },
        { name: "錢幣七", type: "錢幣", img: "https://i.urusai.cc/yuTan.jpeg" },
        { name: "錢幣八", type: "錢幣", img: "https://i.urusai.cc/rEiV6.jpeg" },
        { name: "錢幣九", type: "錢幣", img: "https://i.urusai.cc/Q67US.jpeg" },
        { name: "錢幣十", type: "錢幣", img: "https://i.urusai.cc/WWGb3.jpeg" },
        { name: "錢幣侍者", type: "錢幣", img: "https://i.urusai.cc/3PAFD.jpeg" },
        { name: "錢幣騎士", type: "錢幣", img: "https://i.urusai.cc/CLKad.jpeg" },
        { name: "錢幣王后", type: "錢幣", img: "https://i.urusai.cc/JEssn.jpeg" },
        { name: "錢幣國王", type: "錢幣", img: "https://i.urusai.cc/WLUt7.jpeg" },
    ];
    
    // Simple keywords for all cards, used as a fallback and for the modal
    const cardKeywords = {
            "愚人": { upright: "開始、冒險、天真、潛力、無限可能", reversed: "魯莽、天真、不明智的決定、猶豫不決" },
            "魔術師": { upright: "創造力、溝通、技能、萬事俱備、主動", reversed: "欺騙、濫用才能、缺乏創意、精力錯置" },
            "女祭司": { upright: "直覺、智慧、神秘、靜默、潛意識", reversed: "秘密、膚淺、忽視直覺、情緒化" },
            "皇后": { upright: "豐收、母愛、創造、自然、享樂", reversed: "不孕、停滯、依賴、失職的母親、過度放縱" },
            "皇帝": { upright: "權力、秩序、統治、父親、穩定", reversed: "暴君、濫用權力、不成熟、缺乏自律" },
            "教宗": { upright: "傳統、宗教、教育、道德、貴人相助", reversed: "打破傳統、思想僵化、誤導、虛偽" },
            "戀人": { upright: "愛情、選擇、結合、人際關係、價值觀", reversed: "錯誤的選擇、關係失和、分離、三角關係" },
            "戰車": { upright: "勝利、意志力、自律、競爭、前進", reversed: "失敗、失控、魯莽、衝突、方向錯誤" },
            "力量": { upright: "勇氣、信心、耐心、以柔克剛、內在力量", reversed: "軟弱、恐懼、缺乏自信、濫用力量" },
            "隱士": { upright: "內省、孤獨、指引、謹慎、智慧", reversed: "孤僻、固執、粗心、拒絕忠告" },
            "命運之輪": { upright: "命運、轉變、契機、幸運、循環", reversed: "厄運、抗拒改變、停滯、意外的打擊" },
            "正義": { upright: "公正、平衡、法律、決定、誠實", reversed: "不公、偏見、法律問題、錯誤的決定" },
            "吊人": { upright: "犧牲、等待、換位思考、以退為進、順應", reversed: "無謂的犧牲、掙扎、鑽牛角尖、停滯不前" },
            "死神": { upright: "結束、轉變、新生、放下、過渡期", reversed: "抗拒改變、沉溺過去、停滯、恐懼結束" },
            "節制": { upright: "中庸、調和、溝通、適應、耐心", reversed: "失衡、極端、溝通不良、缺乏耐心" },
            "惡魔": { upright: "慾望、束縛、沉迷、物質主義、誘惑", reversed: "掙脫束縛、自由、思想開放、認清真相" },
            "塔": { upright: "遽變、災難、破壞、覺醒、天啟", reversed: "困境、逃避改變、延遲的災難、內在的混亂" },
            "星星": { upright: "希望、信心、寧靜、療癒、靈感", reversed: "絕望、沮喪、失信、迷失方向" },
            "月亮": { upright: "不安、恐懼、幻象、潛意識、秘密", reversed: "真相大白、解除困惑、克服恐懼、謊言被揭穿" },
            "太陽": { upright: "成功、快樂、自由、活力、清晰", reversed: "短暫的成功、虛假的快樂、缺乏熱情、悲觀" },
            "審判": { upright: "復活、召喚、決定、解放、業力", reversed: "自我批判、逃避決定、錯失良機、內疚" },
            "世界": { upright: "完成、圓滿、整合、成就、旅行", reversed: "未完成、停滯、缺乏整合、原地踏步" },
            "權杖一": { upright: "新行動、創造、機會、靈感、潛力", reversed: "延遲、缺乏動力、錯失機會、計畫失敗" },
            "權杖二": { upright: "計畫、決定、權力、展望未來、選擇", reversed: "猶豫不決、計畫不周、失去方向、恐懼未知" },
            "權杖三": { upright: "領導、遠見、合作、探索、初步成功", reversed: "缺乏遠見、合作破裂、延遲、目光短淺" },
            "權杖四": { upright: "慶祝、和諧、穩定、家庭、避風港", reversed: "不穩定、家庭失和、關係緊張、缺乏歸屬感" },
            "權杖五": { upright: "競爭、衝突、挑戰、不同意見、混亂", reversed: "避免衝突、尋求和解、內在鬥爭、疲憊" },
            "權杖六": { upright: "勝利、成功、認可、自信、好消息", reversed: "失敗、驕傲自大、缺乏認可、壞消息" },
            "權杖七": { upright: "防禦、挑戰、勇氣、堅持立場、有利位置", reversed: "投降、不知所措、失去優勢、疲於應付" },
            "權杖八": { upright: "迅速、行動、旅行、好消息、進展", reversed: "延遲、阻礙、猶豫、壞消息" },
            "權杖九": { upright: "警覺、防禦、經驗、等待、堅韌", reversed: "精疲力竭、放棄防守、偏執、舊傷復發" },
            "權杖十": { upright: "負擔、責任、壓力、過勞、堅持", reversed: "放下負擔、崩潰、逃避責任、委派任務" },
            "權杖侍者": { upright: "探索、好奇、新消息、學習、熱情", reversed: "壞消息、猶豫不決、缺乏方向、不成熟" },
            "權杖騎士": { upright: "行動力、熱情、衝動、冒險、旅行", reversed: "魯莽、延遲、挫折、精力分散" },
            "權杖王后": { upright: "自信、熱情、領導力、有魅力、獨立", reversed: "嫉妒、專橫、缺乏自信、情緒化" },
            "權杖國王": { upright: "領導者、有遠見、創造力、權威、果斷", reversed: "暴君、衝動、決策失誤、缺乏遠見" },
            "聖杯一": { upright: "新感情、愛、喜悅、感受、直覺", reversed: "情感壓抑、失落、關係空虛、錯失愛的機會" },
            "聖杯二": { upright: "結合、伴侶、合作、友誼、和諧", reversed: "分手、失和、關係不對等、合作破裂" },
            "聖杯三": { upright: "慶祝、友誼、團體、歡樂、合作", reversed: "過度放縱、團體失和、流言蜚語、孤立" },
            "聖杯四": { upright: "不滿、冷漠、內省、錯失機會、觀望", reversed: "抓住新機會、走出低潮、重新燃起熱情" },
            "聖杯五": { upright: "失落、悲傷、專注於失去、遺憾", reversed: "走出悲傷、原諒、接受、看到希望" },
            "聖杯六": { upright: "懷舊、童年、回憶、饋贈、純真", reversed: "沉溺過去、不願成長、不愉快的童年" },
            "聖杯七": { upright: "幻想、選擇、白日夢、不切實際", reversed: "認清現實、做出決定、目標明確、避免誘惑" },
            "聖杯八": { upright: "拋棄、尋找、不滿足、轉身離開", reversed: "猶豫不決、害怕改變、困在原地、無力離開" },
            "聖杯九": { upright: "美夢成真、滿足、享樂、得意", reversed: "不滿足、貪婪、自滿、虛假的快樂" },
            "聖杯十": { upright: "家庭美滿、幸福、和諧、情感圓滿", reversed: "家庭失和、關係破裂、期望落空" },
            "聖杯侍者": { upright: "情感的訊息、直覺、好奇、新的可能性", reversed: "情感不成熟、情緒化、逃避現實" },
            "聖杯騎士": { upright: "浪漫、魅力、提議、溫柔、理想主義", reversed: "善變、欺騙、不切實際、情感操控" },
            "聖杯王后": { upright: "同理心、關懷、直覺、母性、溫柔", reversed: "情緒化、依賴、過度敏感、情感勒索" },
            "聖杯國王": { upright: "情感成熟、寬容、外交手腕、冷靜", reversed: "情緒不穩、情感操控、冷漠、壓抑" },
            "寶劍一": { upright: "新挑戰、清晰、理智、決心、突破", reversed: "混亂、決策失誤、缺乏清晰度、濫用權力" },
            "寶劍二": { upright: "對立、僵局、逃避、選擇困難", reversed: "做出決定、打破僵局、謊言被揭穿" },
            "寶劍三": { upright: "悲傷、心碎、失落、痛苦、分離", reversed: "走出傷痛、原諒、釋懷、恢復" },
            "寶劍四": { upright: "休息、沉思、準備、平靜、休養", reversed: "停滯、精疲力竭、被迫行動、焦慮" },
            "寶劍五": { upright: "得不償失的勝利、自私、屈辱、衝突", reversed: "和解、放下怨恨、承認錯誤、避免衝突" },
            "寶劍六": { upright: "過渡、療傷、旅行、放下過去", reversed: "停滯不前、無法釋懷、旅途不順" },
            "寶劍七": { upright: "欺騙、策略、逃避、不誠實", reversed: "被揭穿、誠實、面對現實、良心發現" },
            "寶劍八": { upright: "自我設限、困惑、無助、受害者心態", reversed: "掙脫束縛、找到出路、看清真相" },
            "寶劍九": { upright: "焦慮、恐懼、噩夢、絕望、罪惡感", reversed: "走出陰霾、尋求幫助、克服恐懼" },
            "寶劍十": { upright: "結束、失敗、痛苦的終結、黎明前的黑暗", reversed: "無法解脫、持續的痛苦、舊事重演" },
            "寶劍侍者": { upright: "好奇、學習、新消息、警覺、溝通", reversed: "流言蜚語、缺乏規劃、說謊、壞消息" },
            "寶劍騎士": { upright: "果斷、直接、聰明、行動迅速、有野心", reversed: "魯莽、具攻擊性、言辭傷人、缺乏遠見" },
            "寶劍王后": { upright: "理智、獨立、誠實、清晰、有洞察力", reversed: "冷酷、刻薄、偏見、過於批判" },
            "寶劍國王": { upright: "權威、邏輯、智慧、專業、公正", reversed: "專制、濫用權力、不擇手段、冷酷無情" },
            "錢幣一": { upright: "新機會、務實、豐盛、顯化、穩定", reversed: "錯失良機、財務損失、計畫不周" },
            "錢幣二": { upright: "平衡、適應、多工、彈性、財務管理", reversed: "失衡、財務困難、決策失誤、分身乏術" },
            "錢幣三": { upright: "團隊合作、技能、學習、品質、初步成果", reversed: "合作不順、缺乏技能、品質低劣" },
            "錢幣四": { upright: "掌控、穩定、安全感、節儉、守財", reversed: "貪婪、吝嗇、害怕改變、財務損失" },
            "錢幣五": { upright: "貧困、逆境、孤立、財務困難、尋求幫助", reversed: "走出困境、復甦、找到援助" },
            "錢幣六": { upright: "慷慨、分享、施與受、財務援助", reversed: "債務、吝嗇、不平等的關係、濫用善心" },
            "錢幣七": { upright: "耐心、評估、等待收穫、長期投資", reversed: "不耐煩、投資失敗、半途而廢" },
            "錢幣八": { upright: "專注、技能、勤奮、精益求精", reversed: "缺乏野心、工作乏味、重複勞動" },
            "錢幣九": { upright: "獨立、豐收、自信、享受成果", reversed: "依賴、財務損失、空虛、過度揮霍" },
            "錢幣十": { upright: "財富、傳承、家庭、穩定、長遠成功", reversed: "財務糾紛、家庭問題、失去穩定" },
            "錢幣侍者": { upright: "學習、新機會、務實、專注", reversed: "缺乏規劃、錯失良機、懶惰、壞消息" },
            "錢幣騎士": { upright: "勤奮、可靠、耐心、按部就班", reversed: "停滯、懶惰、固執、缺乏動力" },
            "錢幣王后": { upright: "務實、照顧、慷慨、穩定、享受生活", reversed: "過度物質、缺乏安全感、嫉妒、吝嗇" },
            "錢幣國王": { upright: "成功、富裕、可靠、企業家、穩定", reversed: "貪婪、腐敗、固執、財務失利" },
    };
    
    // This object will hold all detailed card meanings
    const detailedCardMeanings = {
        "愚人": {
            introduction: `
                <p class="mb-2"><b>核心關鍵詞：</b> 開始、冒險、大膽、天真、愚笨、我行我素、潛力、飄泊、旅行。</p>
                <p><b>核心概念：</b>作為大牌，代表宇宙性的宏觀能量與生命課題。這是「愚人之旅」的起點，象徵純真、潛力與旅程的開端。其編號0代表著無限的可能性，可以是完整的圓，也可以是一無所有，包含了所有好與壞的可能。</p>
            `,
            detailed_analysis: `
                <div style="background-color: #1f2937; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                    <h4 style="margin:0; font-size: 16px; color: #fde047; font-weight: 600; margin-bottom: 8px;">牌面描述</h4>
                    <p>愚人（The Fool）穿著色彩斑斕的服裝，頭上戴頂象徵成功的桂冠，無視於前方的懸崖，依舊昂首闊步向前行。他左手拿著一朵白玫瑰，象徵純潔與熱情；右手則輕輕握著一根權杖，上面繫著裝載經驗的包袱。他腳邊的小白狗正狂吠著，像是在提醒他懸崖的危險，又像在隨他一同起舞。無論如何，愚人神色歡欣，望向遙遠的天空而非眼前的懸崖，遠方的山脈象徵他前方未知的旅程，而白色的太陽則自始至終見證著他的一舉一動。</p>
                </div>
                <div style="background-color: #1f2937; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                    <h4 style="margin:0; font-size: 16px; color: #fde047; font-weight: 600; margin-bottom: 8px;">牌義推演與象徵</h4>
                    <p>愚人是一張特殊的大牌，編號為0，可以出現在任何地方，象徵旅程的開始。這個數字代表無限的可能性，如同空白的狀態，可好可壞。愚人牌對應風元素，像風一樣自由自在、飄泊不定。</p>
                    <ul style="list-style-type: disc; padding-left: 20px;">
                        <li><b>經驗與潛力：</b> 他並非完全愚蠢，包袱裡裝著他的經驗，只是他不被經驗所控制。他漫不經心地握著象徵力量的權杖，與魔術師有意識地運用截然不同，顯示他尚未意識到自身蘊含的神奇魔法與潛力。</li>
                        <li><b>愚人之旅：</b> 愚人是整個塔羅旅程的起點與主角。整個大牌的故事就是一場愚人的冒險，描述他從新生兒開始，經歷各種原型人物的引導與互動，最終在世界牌中完成旅程，達到成功。</li>
                    </ul>
                </div>
                 <div style="background-color: #1f2937; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                    <h4 style="margin:0; font-size: 16px; color: #fde047; font-weight: 600; margin-bottom: 8px;">代表人物與原型</h4>
                     <ul style="list-style-type: disc; padding-left: 20px;">
                        <li><b>原型：</b> 在占卜中，愚人象徵「初生之犢不畏虎」的新生兒，天不怕地不怕。</li>
                        <li><b>代表人物：</b> 他是各種神話或故事中的流浪者原型，例如希臘神話中的酒神戴歐尼修斯（Dionysus）、道教八仙中的韓湘子、民間傳說中的濟公，以及金庸小說中的老頑童周伯通。這些角色都具有外表瘋癲、我行我素、不計後果的特點。</li>
                    </ul>
                </div>
            `,
            upright_full: `
                <b>正位牌義：天真、大膽、充滿潛力、熱愛冒險、無拘無束、新的開始、旅行。憑感覺行事，不計後果，活在當下。</b>
                <ul style="list-style-type: disc; padding-left: 20px; margin-top: 8px;">
                    <li><b>內在與外在狀態：</b>在占卜中，若愚人代表一個人，此人可能居無定所，內心狂放不羈。他愛好冒險，會衝動地陷入戀情，但難以安定下來或做出承諾。他看似漫無目的，不遵守世俗規範，行為舉止孩子氣，但內心明白自己在做什麼，只是目標與一般人不同。他是一個活在當下的樂觀主義者。</li>
                    <li><b>生活層面的意義：</b>表示旅行，特別是未經詳細計畫的旅行、搬家或轉學等大膽的行動。當事人可能會把事情看得太簡單，沒有經過縝密的思考和計劃，但這也意味著潛力無窮。工作上可能表示處在一個需要創意的另類工作環境中。感情上，可能代表旅途中的戀情，或是「今朝有酒今朝醉」的態度。</li>
                </ul>
            `,
            reversed_full: `
                <b>逆位牌義：逆位的愚人牌通常指向因魯莽、無知而產生的問題。逆位時圖像中的愚人會頭下腳上栽落懸崖，潛力無窮的狀態轉為問題叢生。</b>
                <ul style="list-style-type: disc; padding-left: 20px; margin-top: 8px;">
                    <li><b>狀態與行為（過度）：</b> 原本的天真變成愚蠢，大膽變成魯莽，我行我素成為不守規矩。當事人可能粗心大意、計畫過於冒失、行事瘋狂。</li>
                    <li><b>狀態與行為（不足）：</b> 失去正向特質，無法聽從內心本能行事，變得過於小心而錯失良機、膽小怕事、喪失勇氣、太在意別人的看法。</li>
                    <li><b>決策：</b> 大體而言，愚人逆位時，當事人容易做出不明智的決定或舉動。</li>
                </ul>
                <p style="margin-top: 8px;"><b>逆位牌義補充：</b>逆位的解讀並非簡單地將正位意義反轉，而是提供了更豐富的解讀可能性。它可能代表能量的壓抑、否認、過度、不足、時間點的差異（剛開始或快結束）或誤用等。解牌時需憑藉經驗與直覺，並結合牌陣與問題情境來判斷。</p>
            `
        }
    };

    let currentSpread = null;
    let drawnCardsData = [];

   
        const majorArcanaGrid = document.getElementById('major-arcana-grid');
        const wandsGrid = document.getElementById('wands-grid');
        const cupsGrid = document.getElementById('cups-grid');
        const swordsGrid = document.getElementById('swords-grid');
        const pentaclesGrid = document.getElementById('pentacles-grid');
        
        const grids = {
            '大阿爾克那': majorArcanaGrid,
            '權杖': wandsGrid,
            '聖杯': cupsGrid,
            '寶劍': swordsGrid,
            '錢幣': pentaclesGrid
        };

        function createCardElement(card) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'cursor-pointer transform hover:scale-105 transition-transform duration-300';
            cardDiv.innerHTML = `<img src="${card.img}" alt="${card.name}" class="card-image shadow-lg hover:shadow-yellow-400/30">`;
            cardDiv.addEventListener('click', () => showCardDetails(card.name));
            return cardDiv;
        }

        allCards.forEach(card => {
            if (grids[card.type]) {
                grids[card.type].appendChild(createCardElement(card));
            }
        });

        (function(){
            emailjs.init("nYyZS-Q-jokmGLMfM");
        })();

        const spreadCauseEffectBtn = document.getElementById('spread-cause-effect');
        const spreadTimelineBtn = document.getElementById('spread-timeline');
        const drawCardsBtn = document.getElementById('draw-cards-btn');
        const spreadDescription = document.getElementById('spread-description');
        const readingArea = document.getElementById('reading-area');
        const analysisAndEmailArea = document.getElementById('analysis-and-email-area');

        function selectSpread(spreadType, btnElement) {
            currentSpread = spreadType;
            drawCardsBtn.disabled = false;
            
            [spreadCauseEffectBtn, spreadTimelineBtn].forEach(btn => {
                btn.classList.remove('active-spread');
            });

            btnElement.classList.add('active-spread');

            if (spreadType === 'cause-effect') {
                spreadDescription.textContent = '「因果牌陣」將抽出兩張牌，分別代表事件的原因與可能的結果。';
                drawCardsBtn.textContent = '抽取因果牌陣';
            } else {
                spreadDescription.textContent = '「時間之流牌陣」將抽出三張牌，分別代表事件的過去、現在與未來。';
                drawCardsBtn.textContent = '抽取時間之流牌陣';
            }
            
            displaySpreadPlaceholders(spreadType);
            analysisAndEmailArea.classList.add('hidden'); // Hide analysis when new spread is chosen
            readingArea.classList.remove('hidden');
            readingArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function displaySpreadPlaceholders(spreadType) {
            const drawnCardsDiv = document.getElementById('drawn-cards');
            const labels = spreadType === 'cause-effect' ? ['原因 (因)', '結果 (果)'] : ['過去', '現在', '未來'];
            drawnCardsDiv.innerHTML = ''; // Clear previous content

            drawnCardsDiv.className = 'flex justify-center items-start gap-4 md:gap-8 flex-wrap mb-8';

            labels.forEach(label => {
                const placeholderElement = document.createElement('div');
                placeholderElement.className = 'text-center w-[45%] md:w-[30%] max-w-[220px] flex-shrink-0';
                placeholderElement.innerHTML = `
                    <p class="font-semibold text-lg mb-2 text-indigo-300 h-8">${label}</p>
                    <div class="card-image bg-gray-700 border-2 border-dashed border-gray-500 rounded-lg flex items-center justify-center">
                        <svg class="w-16 h-16 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.648l-.21-1.453a3.375 3.375 0 00-2.455-2.456l-1.453-.21.21 1.453a3.375 3.375 0 002.455 2.456l1.453.21z" />
                        </svg>
                    </div>
                    <p class="mt-2 font-semibold text-gray-500 h-7">-</p>
                `;
                drawnCardsDiv.appendChild(placeholderElement);
            });
        }

        function drawCards() {
            if (!currentSpread) return;

            const shuffledDeck = [...allCards].sort(() => Math.random() - 0.5);
            const numCards = currentSpread === 'cause-effect' ? 2 : 3;
            drawnCardsData = [];

            for (let i = 0; i < numCards; i++) {
                const card = shuffledDeck.pop();
                const isReversed = Math.random() < 0.5;
                drawnCardsData.push({ ...card, isReversed });
            }

            displayReadingResult();
        }

        function displayReadingResult() {
            const drawnCardsDiv = document.getElementById('drawn-cards');
            const analysisResultDiv = document.getElementById('analysis-result');
            drawnCardsDiv.innerHTML = ''; // Clear placeholders

            const labels = currentSpread === 'cause-effect' ? ['原因 (因)', '結果 (果)'] : ['過去', '現在', '未來'];

            drawnCardsData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'text-center w-[45%] md:w-[30%] max-w-[220px] flex-shrink-0';
                cardElement.innerHTML = `
                    <p class="font-semibold text-lg mb-2 text-indigo-300 h-8">${labels[index]}</p>
                    <img src="${card.img}" alt="${card.name}" 
                         class="card-image shadow-lg cursor-pointer transform hover:scale-105 transition-transform duration-300 ${card.isReversed ? 'rotate-180' : ''}"
                         onclick="showCardDetails('${card.name}')">
                    <p class="mt-2 font-semibold text-gray-200 h-7">${card.name} ${card.isReversed ? '(逆位)' : '(正位)'}</p>
                `;
                drawnCardsDiv.appendChild(cardElement);
            });
            
            let analysisHTML = '<h3 class="text-2xl font-bold text-center mb-6 text-yellow-300">牌義介紹</h3>';
            drawnCardsData.forEach((card, index) => {
                 const fullCard = getFullCardData(card.name);
                 
                 analysisHTML += `
                    <div class="mb-6 pb-6 border-b border-gray-700 last:border-b-0 last:pb-0">
                        <h4 class="text-xl font-bold text-indigo-300 mb-3">${labels[index]}：${card.name} ${card.isReversed ? '(逆位)' : '(正位)'}</h4>
                        <div class="space-y-2 text-gray-300">
                            ${fullCard.introduction}
                        </div>
                    </div>
                 `;
            });

            analysisHTML += `
                <div class="mt-8 pt-6 border-t border-gray-700">
                    <h4 class="text-xl font-bold text-indigo-300 mb-2">綜合解讀提示</h4>
                    <p class="text-gray-400">解牌的核心是將抽出的牌卡串連成一個與提問相關的故事。請試著將以上牌義整合成一個連貫的敘述，思考它們如何共同回答您心中的問題。<br><em class="text-sm text-gray-500">（更詳細的個別牌義分析將會寄送到您的電子信箱中。）</em></p>
                </div>
            `;

            analysisResultDiv.innerHTML = analysisHTML;
            analysisAndEmailArea.classList.remove('hidden');
        }
        
        function getFullCardData(cardName) {
             const baseInfo = allCards.find(c => c.name === cardName);
             const detailedData = detailedCardMeanings[cardName];
             const keywords = cardKeywords[cardName] || { upright: '待補充', reversed: '待補充' };

             if (!detailedData) {
                 return {
                     ...baseInfo,
                     introduction: `<p><b>核心關鍵詞：</b>${keywords.upright} / ${keywords.reversed}</p><p><b>核心概念：</b>此牌屬於 ${baseInfo.type} 牌組，反映了我們日常生活的具體事件、情境與心態。</p>`,
                     detailed_analysis: `<p>詳細分析待補充。</p>`,
                     upright_full: `<p><b>正位詳解</b><br>正位時，通常代表其核心能量的順暢與積極展現。關鍵詞為：${keywords.upright}。</p>`,
                     reversed_full: `<p><b>逆位詳解</b><br>逆位可能暗示能量的轉變。關鍵詞為：${keywords.reversed}。</p>`
                 };
             }

             return { ...baseInfo, ...detailedData };
        }

        function showCardDetails(cardName) {
            const card = getFullCardData(cardName);
            const modalContent = document.getElementById('modal-content');
            
            const keywords = cardKeywords[cardName] || {};

            modalContent.innerHTML = `
                <div class="md:flex md:gap-8">
                    <div class="md:w-1/3 text-center mb-6 md:mb-0">
                        <img src="${card.img}" alt="${card.name}" class="w-full max-w-[250px] mx-auto rounded-lg shadow-xl">
                        <h2 class="text-3xl font-bold mt-4 text-yellow-300">${card.name}</h2>
                        <p class="text-indigo-300">${card.type}</p>
                         <div class="mt-4 text-left text-sm p-3 bg-gray-700 rounded-lg">
                            <p><b>正位關鍵詞:</b> ${keywords.upright}</p>
                            <p><b>逆位關鍵詞:</b> ${keywords.reversed}</p>
                        </div>
                    </div>
                    <div class="md:w-2/3 space-y-4 text-left">
                        ${card.introduction}
                    </div>
                </div>`;
            document.getElementById('card-modal').classList.remove('hidden');
            modalContent.parentElement.scrollTop = 0;
        }

        function sendEmail() {
            // ... (Send email logic remains the same, but will now use the detailed content)
            const emailInput = document.getElementById('email-input');
            const sendBtn = document.getElementById('send-email-btn');
            const emailStatus = document.getElementById('email-status');

            if (!emailInput.value || !/^\S+@\S+\.\S+$/.test(emailInput.value)) {
                emailStatus.textContent = '請輸入有效的電子信箱格式。';
                emailStatus.style.color = '#f87171'; // Red
                return;
            }

            if (drawnCardsData.length === 0) {
                emailStatus.textContent = '請先抽牌後再寄送報告。';
                emailStatus.style.color = '#facc15'; // Yellow
                return;
            }

            sendBtn.disabled = true;
            sendBtn.textContent = '寄送中...';
            emailStatus.textContent = '';
            
            const messageHtml = generateEmailHtml(currentSpread, drawnCardsData);
            
            const templateParams = {
                to_email: emailInput.value,
                message_html: messageHtml
            };

            emailjs.send('service_tu3puek', 'template_pexhwes', templateParams)
                .then(function(response) {
                   emailStatus.textContent = '分析報告已成功寄送！';
                   emailStatus.style.color = '#4ade80'; // Green
                   sendBtn.textContent = '重新占卜';
                   const newBtn = sendBtn.cloneNode(true);
                   sendBtn.parentNode.replaceChild(newBtn, sendBtn);
                   newBtn.addEventListener('click', () => window.location.reload());

                }, function(error) {
                   emailStatus.textContent = '寄送失敗，請檢查 EmailJS 模板變數設定。';
                   emailStatus.style.color = '#f87171'; // Red
                   sendBtn.disabled = false;
                   sendBtn.textContent = '寄送報告';
                });
        }
        
        function generateEmailHtml(spreadType, cards) {
            const spreadName = spreadType === 'cause-effect' ? '因果牌陣' : '時間之流牌陣';
            const labels = spreadType === 'cause-effect' ? ['原因 (因)', '結果 (果)'] : ['過去', '現在', '未來'];
            
            let drawnCardsHtml = '<table width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom: 24px;"><tr>';
            cards.forEach((card, index) => {
                drawnCardsHtml += `
                    <td align="center" style="padding: 10px; vertical-align: top;">
                        <p style="font-size: 16px; font-weight: 600; color: #a5b4fc; margin: 0 0 8px 0; font-family: 'Noto Serif TC', Georgia, serif;">${labels[index]}</p>
                        <img src="${card.img}" alt="${card.name}" width="150" style="border-radius: 8px; max-width: 150px; ${card.isReversed ? 'transform: rotate(180deg);' : ''}">
                        <p style="font-size: 16px; font-weight: 600; color: #e5e7eb; margin: 8px 0 0 0; font-family: 'Noto Serif TC', Georgia, serif;">${card.name} ${card.isReversed ? '(逆位)' : ''}</p>
                    </td>
                `;
            });
            drawnCardsHtml += '</tr></table>';

            let analysisDetailHtml = '';
            cards.forEach((card, index) => {
                const fullCard = getFullCardData(card.name);
                const positionMeaning = card.isReversed ? (fullCard.reversed_full) : (fullCard.upright_full);

                analysisDetailHtml += `
                    <div style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid #374151; text-align: left;">
                        <h3 style="font-size: 20px; font-weight: 600; color: #a5b4fc; font-family: 'Noto Serif TC', Georgia, serif; margin: 0 0 12px 0;">${labels[index]}：${card.name} ${card.isReversed ? '(逆位)' : '(正位)'}</h3>
                        <div style="color: #d1d5db; line-height: 1.7; font-size: 15px;">
                           ${fullCard.detailed_analysis}
                           <div style="background-color: #1f2937; padding: 12px; border-radius: 6px;">
                                ${positionMeaning}
                           </div>
                        </div>
                    </div>
                `;
            });
            
            const combinedHtml = `
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: auto; background-color: #1f2937; color: #d1d5db; border-radius: 16px; overflow: hidden;">
                    <div style="text-align: center; background-color: #111827; padding: 32px 16px;">
                        <h1 style="font-size: 2.25rem; font-weight: bold; color: #fde047; margin: 0; font-family: 'Noto Serif TC', Georgia, serif;">線上塔羅神諭</h1>
                        <p style="font-size: 1.125rem; margin: 8px 0 0 0; color: #a5b4fc;">這是您的占卜結果分析</p>
                    </div>
                    <div style="padding: 24px;">
                        <h2 style="font-size: 1.5rem; font-weight: bold; text-align: center; color: #fde047; margin: 0 0 24px 0; font-family: 'Noto Serif TC', Georgia, serif;">您的【${spreadName}】抽牌結果</h2>
                        ${drawnCardsHtml}
                        <h2 style="font-size: 1.5rem; font-weight: bold; text-align: center; color: #fde047; margin: 32px 0 24px 0; font-family: 'Noto Serif TC', Georgia, serif;">詳細占卜分析</h2>
                        ${analysisDetailHtml}
                        <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #374151;">
                            <h3 style="font-size: 20px; font-weight: 600; color: #a5b4fc; font-family: 'Noto Serif TC', Georgia, serif; margin: 0 0 12px 0;">綜合解讀提示</h3>
                            <p style="color: #9ca3af; line-height: 1.7; font-size: 15px; margin: 0;">解牌的核心是將抽出的牌卡串連成一個與提問相關的故事。請試著將以上牌義整合成一個連貫的敘述，思考它們如何共同回答您心中的問題。</p>
                        </div>
                    </div>
                    <div style="text-align: center; background-color: #111827; padding: 24px; font-size: 12px; color: #6b7280;">
                        <p style="margin: 0 0 12px 0;"><a href="https://tarot-c0p.pages.dev/" style="color: #fde047; text-decoration: none;">再次占卜</a></p>
                        <p style="margin: 0;">© 2025 線上塔羅神諭. All Rights Reserved @WEDO</p>
                        <p style="margin: 8px 0 0 0;">🔒 隱私聲明：您的資料僅用於寄送本次報告，系統不會保存你的資料與占卜結果。</p>
                    </div>
                </div>
            `;
            return combinedHtml;
        }

        spreadCauseEffectBtn.addEventListener('click', (e) => selectSpread('cause-effect', e.currentTarget));
        spreadTimelineBtn.addEventListener('click', (e) => selectSpread('timeline', e.currentTarget));
        drawCardsBtn.addEventListener('click', drawCards);
        document.getElementById('send-email-btn').addEventListener('click', sendEmail);
        const modal = document.getElementById('card-modal');
        const closeModalBtn = document.getElementById('close-modal');
        closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
            }
        });
    });
    </script>

</body>
</html>

